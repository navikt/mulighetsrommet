server:
  port: 8080
  host: 0.0.0.0

app:
  database:
    host: ${DB_HOST}
    port: ${DB_PORT}
    name: ${DB_DATABASE}
    user: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    maximumPoolSize: 10
    migrationConfig:
      strategy: Migrate

  kafka:
    producerId: mulighetsrommet-api-kafka-producer.v1
    consumerGroupId: mulighetsrommet-api-kafka-consumer.v1
    producers:
      arenaMigreringTiltaksgjennomforinger:
        topic: arena-migrering-tiltaksgjennomforinger-v1
      tiltaksgjennomforinger:
        topic: team-mulighetsrommet.siste-tiltaksgjennomforinger-v1
      tiltakstyper:
        topic: team-mulighetsrommet.siste-tiltakstyper-v1
    consumers:
      tiltaksgjennomforingerV1:
        id: siste-tiltaksgjennomforinger
        topic: siste-tiltaksgjennomforinger-v1
      amtDeltakerV1:
        id: amt-deltaker
        topic: amt.deltaker-v1
      amtVirksomheterV1:
        id: amt-virksomheter
        topic: amt.virksomheter-v1

  auth:
    azure:
      issuer: ${AZURE_OPENID_CONFIG_ISSUER}
      jwksUri: ${AZURE_OPENID_CONFIG_JWKS_URI}
      audience: ${AZURE_APP_CLIENT_ID}
      tokenEndpointUrl: ${AZURE_OPENID_CONFIG_TOKEN_ENDPOINT}

  sanity:
    dataset: ${SANITY_DATASET}
    projectId: ${SANITY_PROJECT_ID}
    token: ${SANITY_AUTH_TOKEN}

  veilarbvedtaksstotteConfig:
    url: https://veilarbvedtaksstotte.dev-fss-pub.nais.io/veilarbvedtaksstotte/api
    scope: api://dev-fss.pto.veilarbvedtaksstotte/.default

  veilarboppfolgingConfig:
    url: https://veilarboppfolging.dev-fss-pub.nais.io/veilarboppfolging/api
    scope: api://dev-fss.pto.veilarboppfolging/.default

  veilarbpersonConfig:
    url: https://veilarbperson.dev-fss-pub.nais.io/veilarbperson/api
    scope: api://dev-fss.pto.veilarbperson/.default

  veilarbveilederConfig:
    url: https://veilarbveileder.dev-fss-pub.nais.io/veilarbveileder/api
    scope: api://dev-fss.pto.veilarbveileder/.default

  veilarbdialogConfig:
    url: https://veilarbdialog.dev-fss-pub.nais.io/veilarbdialog/api
    scope: api://dev-fss.pto.veilarbdialog/.default

  poaoTilgang:
    url: http://poao-tilgang.poao
    scope: api://dev-gcp.poao.poao-tilgang/.default

  amtEnhetsregister:
    url: http://amt-enhetsregister.amt
    scope: api://dev-gcp.amt.amt-enhetsregister/.default

  msGraphConfig:
    url: https://graph.microsoft.com
    scope: https://graph.microsoft.com/.default

  arenaAdapter:
    url: http://mulighetsrommet-arena-adapter
    scope: api://dev-gcp.team-mulighetsrommet.mulighetsrommet-arena-adapter/.default

  axsys:
    url: https://axsys.dev-fss-pub.nais.io
    scope: api://dev-fss.org.axsys/.default

  navAnsattService:
    roller:
      - adGruppeId: 639e2806-4cc2-484c-a72a-51b4308c52a1 # team-mulighetsrommet
        rolle: TEAM_MULIGHETSROMMET
      - adGruppeId: ee45478c-57a5-4ee6-b28d-b65f8c1733fe # 0000-GA-mr-admin-flate_betabruker
        rolle: BETABRUKER
      - adGruppeId: e4468c9a-fde3-4c2f-a62d-8463902512f5 # 0000-GA-mr-nav_kontaktperson
        rolle: KONTAKTPERSON

  tasks:
    deleteExpiredTiltakshistorikk:
      cronPattern: "0 0 1 * * *" # Hver morgen kl. 01:00
    synchronizeNorgEnheter:
      delayOfMinutes: 360 # Hver 6. time
    synchronizeEnheterFraSanityTilApi:
      delayOfMinutes: 360 # Hver 6. time
    synchronizeNavAnsatte:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    notifySluttdatoForGjennomforingerNarmerSeg:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    notifySluttdatoForAvtalerNarmerSeg:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    notifyFailedKafkaEvents:
      maxRetries: 5
      delayOfMinutes: 15
    notifySluttdatoForMidlertidigStengtGjennomforingerNarmerSeg:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    oppdaterMetrikker:
      delayOfMinutes: 5

  norg2:
    baseUrl: https://norg2.dev-fss-pub.nais.io/norg2/api/v1

  brreg:
    baseUrl: https://data.brreg.no/enhetsregisteret/api

  slack:
    token: ${SLACK_TOKEN}
    channel: "#team-valp-monitoring"
    enable: true

  unleash:
    appName: ${NAIS_APP_NAME}
    url: ${UNLEASH_SERVER_API_URL}
    token: ${UNLEASH_SERVER_API_TOKEN}
    instanceId: ${NAIS_CLIENT_ID}
    environment: development
