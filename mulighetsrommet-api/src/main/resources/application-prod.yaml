server:
  port: 8080
  host: 0.0.0.0

app:
  database:
    host: ${DB_HOST}
    port: ${DB_PORT}
    name: ${DB_DATABASE}
    user: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    maximumPoolSize: 10
    migrationConfig:
      strategy: Migrate

  kafka:
    producerId: mulighetsrommet-api-kafka-producer.v1
    consumerGroupId: mulighetsrommet-api-kafka-consumer.v1
    producers:
      tiltaksgjennomforinger:
        topic: team-mulighetsrommet.siste-tiltaksgjennomforinger-v1
      tiltakstyper:
        topic: team-mulighetsrommet.siste-tiltakstyper-v1
    consumers:
      amtDeltakerV1:
        id: amt-deltaker
        topic: amt.deltaker-v1
      amtVirksomheterV1:
        id: amt-virksomheter
        topic: amt.virksomheter-v1

  auth:
    azure:
      issuer: ${AZURE_OPENID_CONFIG_ISSUER}
      jwksUri: ${AZURE_OPENID_CONFIG_JWKS_URI}
      audience: ${AZURE_APP_CLIENT_ID}
      tokenEndpointUrl: ${AZURE_OPENID_CONFIG_TOKEN_ENDPOINT}

  sanity:
    dataset: ${SANITY_DATASET}
    projectId: ${SANITY_PROJECT_ID}
    token: ${SANITY_AUTH_TOKEN}

  veilarbvedtaksstotteConfig:
    url: https://veilarbvedtaksstotte.prod-fss-pub.nais.io/veilarbvedtaksstotte/api
    scope: api://prod-fss.pto.veilarbvedtaksstotte/.default

  veilarboppfolgingConfig:
    url: https://veilarboppfolging.prod-fss-pub.nais.io/veilarboppfolging/api
    scope: api://prod-fss.pto.veilarboppfolging/.default

  veilarbpersonConfig:
    url: https://veilarbperson.prod-fss-pub.nais.io/veilarbperson/api
    scope: api://prod-fss.pto.veilarbperson/.default

  veilarbveilederConfig:
    url: https://veilarbveileder.prod-fss-pub.nais.io/veilarbveileder/api
    scope: api://prod-fss.pto.veilarbveileder/.default

  veilarbdialogConfig:
    url: https://veilarbdialog.prod-fss-pub.nais.io/veilarbdialog/api
    scope: api://prod-fss.pto.veilarbdialog/.default

  poaoTilgang:
    url: http://poao-tilgang.poao
    scope: api://prod-gcp.poao.poao-tilgang/.default

  amtEnhetsregister:
    url: http://amt-enhetsregister.amt
    scope: api://prod-gcp.amt.amt-enhetsregister/.default

  msGraphConfig:
    url: https://graph.microsoft.com
    scope: https://graph.microsoft.com/.default

  arenaAdapter:
    url: http://mulighetsrommet-arena-adapter
    scope: api://prod-gcp.team-mulighetsrommet.mulighetsrommet-arena-adapter/.default

  axsys:
    url: https://axsys.prod-fss-pub.nais.io
    scope: api://prod-fss.org.axsys/.default

  navAnsattService:
    roller:
      - adGruppeId: debefa6e-1865-446d-b22b-9579fc735de3 # team-mulighetsrommet
        rolle: TEAM_MULIGHETSROMMET
      - adGruppeId: dde41c4b-42af-401f-bedf-9e537bcbdd37 # 0000-GA-mr-admin-flate_betabruker
        rolle: BETABRUKER
      - adGruppeId: 0fdd133a-f47f-4b95-9a5e-f3a5ec87a472 # (GRP) mr-nav_kontaktperson
        rolle: KONTAKTPERSON

  tasks:
    deleteExpiredTiltakshistorikk:
      cronPattern: "0 0 1 * * *" # Hver morgen kl. 01:00
    synchronizeNorgEnheter:
      delayOfMinutes: 360 # Hver 6. time
    synchronizeNavAnsatte:
      cronPattern: "0 0 6-18 * * MON-FRI" # Hver time i l√∏pet av arbeidsdagen
    notifySluttdatoForGjennomforingerNarmerSeg:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    notifySluttdatoForAvtalerNarmerSeg:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    notifyFailedKafkaEvents:
      maxRetries: 5
      delayOfMinutes: 15
    notifySluttdatoForMidlertidigStengtGjennomforingerNarmerSeg:
      cronPattern: "0 0 6 * * *" # Hver morgen kl. 06:00
    oppdaterMetrikker:
      delayOfMinutes: 5

  norg2:
    baseUrl: https://norg2.prod-fss-pub.nais.io/norg2/api/v1

  brreg:
    baseUrl: https://data.brreg.no/enhetsregisteret/api

  slack:
    token: ${SLACK_TOKEN}
    channel: "#team-valp-monitoring"
    enable: true

  unleash:
    appName: ${NAIS_APP_NAME}
    url: ${UNLEASH_SERVER_API_URL}
    token: ${UNLEASH_SERVER_API_TOKEN}
    instanceId: ${NAIS_CLIENT_ID}
    environment: production


