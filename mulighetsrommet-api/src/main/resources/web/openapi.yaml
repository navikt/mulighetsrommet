openapi: 3.1.0

info:
  version: 1.0.0
  title: Mulighetsrommet API

security:
  - bearerAuth: []

paths:
  /api/v1/intern/avtaler/{id}:
    parameters:
      - $ref: "#/components/parameters/ID"
    get:
      tags:
        - Avtaler
      operationId: getAvtale
      responses:
        200:
          description: The specified avtale.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AvtaleDto"
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/avtaler/{id}/prismodell:
    parameters:
      - $ref: "#/components/parameters/ID"
    put:
      tags:
        - Avtaler
      operationId: upsertPrismodell
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PrismodellRequest"
      responses:
        200:
          description: Avtalen
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AvtaleDto"
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/avtaler:
    get:
      tags:
        - Avtaler
      operationId: getAvtaler
      parameters:
        - in: query
          name: tiltakstyper
          schema:
            type: array
            items:
              type: string
          description: ID for tiltakstyper om du ønsker avtaler for en spesifikk tiltakstype
        - in: query
          name: search
          schema:
            type: string
          description: Search for avtaler by the name
        - in: query
          name: statuser
          schema:
            type: array
            items:
              $ref: "#/components/schemas/AvtaleStatus"
          description: Statuser for avtale
        - in: query
          name: avtaletyper
          schema:
            type: array
            items:
              $ref: "#/components/schemas/Avtaletype"
          description: Avtaletyper
        - in: query
          name: navRegioner
          schema:
            type: array
            items:
              type: string
          description: 4 digit enhetskode
        - in: query
          name: arrangorer
          schema:
            type: array
            items:
              type: string
              format: uuid
          description: Id til arrangører for avtaler
        - in: query
          name: page
          schema:
            type: number
          description: Page number, default 1
        - in: query
          name: size
          schema:
            type: number
          description: Page size, default 50
        - in: query
          name: sort
          schema:
            $ref: "#/components/schemas/SorteringAvtaler"
        - in: query
          name: personvernBekreftet
          schema:
            type: boolean
        - in: query
          name: visMineAvtaler
          schema:
            type: boolean
      responses:
        200:
          description: Object of paginated avtaler connected to specified tiltakstype-id.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginertAvtale"
        default:
          $ref: "#/components/responses/ProblemDetail"
    put:
      tags:
        - Avtaler
      operationId: upsertAvtale
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AvtaleRequest"
      responses:
        200:
          description: Avtale response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AvtaleDto"
        400:
          $ref: "#/components/responses/ValidationError"
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/avtaler/excel:
    get:
      tags:
        - Avtaler
      operationId: lastNedAvtalerSomExcel
      parameters:
        - in: query
          name: tiltakstyper
          schema:
            type: array
            items:
              type: string
          description: ID for tiltakstyper om du ønsker avtaler for en spesifikk tiltakstype
        - in: query
          name: search
          schema:
            type: string
          description: Search for avtaler by the name
        - in: query
          name: statuser
          schema:
            type: array
            items:
              $ref: "#/components/schemas/AvtaleStatus"
          description: Statuser for avtale
        - in: query
          name: avtaletyper
          schema:
            type: array
            items:
              $ref: "#/components/schemas/Avtaletype"
          description: Avtaletyper
        - in: query
          name: navRegioner
          schema:
            type: array
            items:
              type: string
          description: 4 digit enhetskode
        - in: query
          name: arrangorer
          schema:
            type: array
            items:
              type: string
              format: uuid
          description: Id til arrangører for avtaler
        - in: query
          name: page
          schema:
            type: number
          description: Page number, default 1
        - in: query
          name: size
          schema:
            type: number
          description: Page size, default 50
        - in: query
          name: sort
          schema:
            $ref: "#/components/schemas/SorteringAvtaler"
        - in: query
          name: personvernBekreftet
          schema:
            type: boolean
        - in: query
          name: visMineAvtaler
          schema:
            type: boolean
      responses:
        200:
          description: Excel-fil med avtaler
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/gjennomforinger/{id}/deltaker-summary:
    get:
      tags:
        - Gjennomforinger
      operationId: getGjennomforingDeltakerSummary
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          description: ID for gjennomføringen
      responses:
        200:
          description: Oppsummert informasjon om gjennomførings deltakere
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GjennomforingDeltakerSummary"
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/gjennomforinger:
    get:
      tags:
        - Gjennomforinger
      operationId: getGjennomforinger
      parameters:
        - in: query
          name: page
          schema:
            type: number
          description: Page number, default 1
        - in: query
          name: search
          schema:
            type: string
          description: Search for gjennomføringer by the name
        - in: query
          name: navEnheter
          schema:
            type: array
            items:
              type: string
          description: 4 digit enhetskode
        - in: query
          name: tiltakstyper
          schema:
            type: array
            items:
              type: string
              format: uuid
          description: Id for tiltakstype knyttet til gjennomføringer
        - in: query
          name: statuser
          schema:
            type: array
            items:
              $ref: "#/components/schemas/GjennomforingStatus"
          description: Status for gjennomføring
        - in: query
          name: navRegioner
          schema:
            type: array
            items:
              type: string
        - in: query
          name: arrangorer
          schema:
            type: array
            items:
              type: string
              format: uuid
        - in: query
          name: publisert
          schema:
            type: [boolean, "null"]
        - in: query
          name: size
          schema:
            type: number
          description: Page size, default 50
        - in: query
          name: sort
          schema:
            $ref: "#/components/schemas/SorteringGjennomforinger"
        - in: query
          name: avtaleId
          schema:
            type: string
        - in: query
          name: visMineGjennomforinger
          schema:
            type: boolean
      responses:
        200:
          description: Object of paginated gjennomføringer.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginertGjennomforing"
        default:
          $ref: "#/components/responses/ProblemDetail"
    put:
      tags:
        - Gjennomforinger
      operationId: upsertGjennomforing
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GjennomforingRequest"
      responses:
        200:
          description: The specified gjennomføring with data about tiltakstype.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GjennomforingDto"
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/gjennomforinger/excel:
    get:
      tags:
        - Gjennomforinger
      operationId: lastNedGjennomforingerSomExcel
      parameters:
        - in: query
          name: page
          schema:
            type: number
          description: Page number, default 1
        - in: query
          name: search
          schema:
            type: string
          description: Search for gjennomføringer by the name
        - in: query
          name: navEnheter
          schema:
            type: array
            items:
              type: string
          description: 4 digit enhetskode
        - in: query
          name: tiltakstyper
          schema:
            type: array
            items:
              type: string
              format: uuid
          description: Id for tiltakstype knyttet til gjennomføringer
        - in: query
          name: statuser
          schema:
            type: array
            items:
              $ref: "#/components/schemas/GjennomforingStatus"
          description: Status for gjennomføring
        - in: query
          name: navRegioner
          schema:
            type: array
            items:
              type: string
        - in: query
          name: arrangorer
          schema:
            type: array
            items:
              type: string
              format: uuid
        - in: query
          name: publisert
          schema:
            type: [boolean, "null"]
        - in: query
          name: size
          schema:
            type: number
          description: Page size, default 50
        - in: query
          name: sort
          schema:
            $ref: "#/components/schemas/SorteringGjennomforinger"
        - in: query
          name: avtaleId
          schema:
            type: string
        - in: query
          name: visMineGjennomforinger
          schema:
            type: boolean
      responses:
        200:
          description: Excel-fil med gjennomforinger
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        default:
          $ref: "#/components/responses/ProblemDetail"

  /api/v1/intern/gjennomforinger/{id}:
    parameters:
      - $ref: "#/components/parameters/ID"
    get:
      tags:
        - Gjennomforinger
      operationId: getGjennomforing
      responses:
        200:
          description: The specified gjennomføring with data about tiltakstype.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GjennomforingDto"
        default:
          $ref: "#/components/responses/ProblemDetail"

components:
  responses:
    ProblemDetail:
      description: Common error type
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ProblemDetail"
    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ValidationError"
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    ID:
      name: id
      in: path
      description: ID
      required: true
      schema:
        type: string
        format: uuid

    gjennomforingId:
      name: gjennomforingId
      in: path
      description: Gjennomforing Id
      required: true
      schema:
        type: string
        format: uuid

    OrgnrParam:
      in: path
      name: orgnr
      description: organisasjonsnummer
      required: true
      schema:
        type: string

  schemas:
    ProblemDetail:
      type: object
      properties:
        type:
          type: string
        title:
          type: string
        status:
          type: number
        detail:
          type: string
        instance:
          type: string
      required: [type, title, status, detail]
      additionalProperties: true

    ValidationError:
      allOf:
        - $ref: "#/components/schemas/ProblemDetail"
        - type: object
          properties:
            errors:
              type: array
              items:
                $ref: "#/components/schemas/FieldError"
          required: [errors]

    FieldError:
      type: object
      properties:
        detail:
          type: string
        pointer:
          type: string
      required: [detail, pointer]

    Pagination:
      type: object
      properties:
        totalCount:
          type: integer
        totalPages:
          type: integer
        pageSize:
          type: integer
      required:
        - totalCount
        - totalPages
        - pageSize

    PaginertGjennomforing:
      type: object
      required:
        - pagination
        - data
      properties:
        pagination:
          $ref: "#/components/schemas/Pagination"
        data:
          type: array
          items:
            $ref: "#/components/schemas/GjennomforingDto"

    PaginertAvtale:
      type: object
      required:
        - pagination
        - data
      properties:
        pagination:
          $ref: "#/components/schemas/Pagination"
        data:
          type: array
          items:
            $ref: "#/components/schemas/AvtaleDto"

    AvtaleDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tiltakstype:
          $ref: "#/components/schemas/EmbeddedTiltakstype"
        navn:
          type: string
        avtalenummer:
          type: string
        sakarkivNummer:
          type: [string, "null"]
        arrangor:
          $ref: "#/components/schemas/AvtaleArrangorHovedenhet"
        startDato:
          type: string
          format: date
        sluttDato:
          type: [string, "null"]
          format: date
        avtaletype:
          $ref: "#/components/schemas/Avtaletype"
        status:
          $ref: "#/components/schemas/AvtaleStatusDto"
        arenaAnsvarligEnhet:
          $ref: "#/components/schemas/ArenaNavEnhet"
        administratorer:
          type: array
          items:
            $ref: "#/components/schemas/AvtaleAdministrator"
        antallPlasser:
          type: [number, "null"]
        kontorstruktur:
          $ref: "#/components/schemas/Kontorstruktur"
        opphav:
          $ref: "#/components/schemas/Opphav"
        beskrivelse:
          type: string
        faneinnhold:
          $ref: "#/components/schemas/Faneinnhold"
        personopplysninger:
          type: array
          items:
            $ref: "#/components/schemas/Personopplysning"
        personvernBekreftet:
          type: boolean
        amoKategorisering:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/AmoKategorisering"
        opsjonsmodell:
          $ref: "#/components/schemas/Opsjonsmodell"
        opsjonerRegistrert:
          type: array
          items:
            $ref: "#/components/schemas/OpsjonLoggDto"
        utdanningslop:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/Utdanningslop"
        prismodell:
          $ref: "#/components/schemas/PrismodellDto"
      required:
        - id
        - tiltakstype
        - navn
        - avtalenummer
        - startDato
        - avtaletype
        - status
        - kontorstruktur
        - opphav
        - personopplysninger
        - personvernBekreftet
        - amoKategorisering
        - opsjonsmodell
        - opsjonerRegistrert
        - utdanningslop
        - prismodell

    PrismodellDto:
      oneOf:
        - $ref: "#/components/schemas/PrismodellDtoAnnenAvtaltPris"
        - $ref: "#/components/schemas/PrismodellDtoForhandsgodkjentPrisPerManedsverk"
        - $ref: "#/components/schemas/PrismodellDtoAvtaltPrisPerManedsverk"
        - $ref: "#/components/schemas/PrismodellDtoAvtaltPrisPerUkesverk"
        - $ref: "#/components/schemas/PrismodellDtoAvtaltPrisPerTimeOppfolgingPerDeltaker"

    PrismodellDtoAnnenAvtaltPris:
      type: object
      properties:
        type:
          type: string
          const: ANNEN_AVTALT_PRIS
        prisbetingelser:
          type: [string, "null"]
      required: [type, prisbetingelser]

    PrismodellDtoForhandsgodkjentPrisPerManedsverk:
      type: object
      properties:
        type:
          type: string
          const: FORHANDSGODKJENT_PRIS_PER_MANEDSVERK
      required: [type]

    PrismodellDtoAvtaltPrisPerManedsverk:
      type: object
      properties:
        type:
          type: string
          const: AVTALT_PRIS_PER_MANEDSVERK
        prisbetingelser:
          type: [string, "null"]
        satser:
          type: array
          items:
            $ref: "#/components/schemas/AvtaltSatsDto"
      required: [type, prisbetingelser, satser]

    PrismodellDtoAvtaltPrisPerUkesverk:
      type: object
      properties:
        type:
          type: string
          const: AVTALT_PRIS_PER_UKESVERK
        prisbetingelser:
          type: [string, "null"]
        satser:
          type: array
          items:
            $ref: "#/components/schemas/AvtaltSatsDto"
      required: [type, prisbetingelser, satser]

    PrismodellDtoAvtaltPrisPerTimeOppfolgingPerDeltaker:
      type: object
      properties:
        type:
          type: string
          const: AVTALT_PRIS_PER_TIME_OPPFOLGING_PER_DELTAKER
        prisbetingelser:
          type: [string, "null"]
        satser:
          type: array
          items:
            $ref: "#/components/schemas/AvtaltSatsDto"
      required: [type, prisbetingelser, satser]

    AvtaleRequest:
      type: object
      properties:
        id:
          type: string
          format: UUID
        navn:
          type: string
        tiltakskode:
          type: string
        avtalenummer:
          type: [string, "null"]
        sakarkivNummer:
          type: [string, "null"]
        arrangor:
          anyOf:
            - type: "null"
            - type: object
              properties:
                hovedenhet:
                  type: string
                underenheter:
                  type: array
                  items:
                    type: string
                kontaktpersoner:
                  type: array
                  items:
                    type: string
                    format: UUID
              required:
                - hovedenhet
                - underenheter
                - kontaktpersoner
        startDato:
          type: [string, "null"]
          format: date
        sluttDato:
          type: [string, "null"]
          format: date
        administratorer:
          type: array
          items:
            type: string
        avtaletype:
          $ref: "#/components/schemas/Avtaletype"
        prismodell:
          $ref: "#/components/schemas/PrismodellRequest"
        navEnheter:
          type: array
          items:
            type: string
        beskrivelse:
          type: [string, "null"]
        faneinnhold:
          anyOf:
            - type: "null"
            - $ref: "#/components/schemas/FaneinnholdRequest"
        personopplysninger:
          type: array
          items:
            $ref: "#/components/schemas/Personopplysning"
        personvernBekreftet:
          type: boolean
        amoKategorisering:
          anyOf:
            - type: "null"
            - $ref: "#/components/schemas/AmoKategorisering"
        opsjonsmodell:
          $ref: "#/components/schemas/Opsjonsmodell"
        utdanningslop:
          anyOf:
            - type: "null"
            - $ref: "#/components/schemas/UtdanningslopDbo"
      required:
        - id
        - navn
        - tiltakskode
        - arrangorOrganisasjonsnummer
        - arrangorUnderenheter
        - arrangorKontaktpersonId
        - avtalenummer
        - startDato
        - sluttDato
        - administrator
        - avtaletype
        - navEnheter
        - beskrivelse
        - faneinnhold
        - personopplysninger
        - personvernBekreftet
        - amoKategorisering
        - opsjonsmodell
        - utdanningslop
        - prismodell

    PrismodellRequest:
      type: object
      properties:
        prisbetingelser:
          type: [ string, "null" ]
        type:
          $ref: "#/components/schemas/Prismodell"
        satser:
          type: array
          items:
            $ref: "#/components/schemas/AvtaltSatsRequest"
      required: [type, satser]

    Prismodell:
      type: string
      enum:
        - ANNEN_AVTALT_PRIS
        - FORHANDSGODKJENT_PRIS_PER_MANEDSVERK
        - AVTALT_PRIS_PER_MANEDSVERK
        - AVTALT_PRIS_PER_UKESVERK
        - AVTALT_PRIS_PER_TIME_OPPFOLGING_PER_DELTAKER

    EmbeddedTiltakstype:
      type: object
      properties:
        id:
          type: string
          format: uuid
        navn:
          type: string
        tiltakskode:
          $ref: "#/components/schemas/Tiltakskode"
      required:
        - id
        - navn
        - arenaKode
        - tiltakskode

    Avtaletype:
      type: string
      enum:
        - AVTALE
        - RAMMEAVTALE
        - FORHANDSGODKJENT
        - OFFENTLIG_OFFENTLIG

    AvtaleStatus:
      type: string
      enum:
        - AKTIV
        - AVSLUTTET
        - AVBRUTT
        - UTKAST

    AvtaleStatusDto:
      oneOf:
        - $ref: "#/components/schemas/AvtaleStatusUtkast"
        - $ref: "#/components/schemas/AvtaleStatusAktiv"
        - $ref: "#/components/schemas/AvtaleStatusAvbrutt"
        - $ref: "#/components/schemas/AvtaleStatusAvsluttet"
      discriminator:
        propertyName: type
        mapping:
          UTKAST: "#/components/schemas/AvtaleStatusUtkast"
          AKTIV: "#/components/schemas/AvtaleStatusAktiv"
          AVBRUTT: "#/components/schemas/AvtaleStatusAvbrutt"
          AVSLUTTET: "#/components/schemas/AvtaleStatusAvsluttet"

    AvtaleStatusAktiv:
      type: object
      properties:
        type:
          type: string
          const: AKTIV
      required:
        - type

    AvtaleStatusUtkast:
      type: object
      properties:
        type:
          type: string
          const: UTKAST
      required:
        - type

    AvtaleStatusAvsluttet:
      type: object
      properties:
        type:
          type: string
          const: AVSLUTTET
      required:
        - type

    AvtaleStatusAvbrutt:
      type: object
      properties:
        type:
          type: string
          const: AVBRUTT
        tidspunkt:
          type: string
          format: date-time
        aarsak:
          $ref: "#/components/schemas/AvbrytAvtaleAarsak"
        beskrivelse:
          type: string
      required:
        - type
        - tidspunkt
        - aarsak
        - beskrivelse

    SorteringAvtaler:
      type: string
      enum:
        - navn-ascending
        - navn-descending
        - startdato-ascending
        - startdato-descending
        - sluttdato-ascending
        - sluttdato-descending
        - arrangor-ascending
        - arrangor-descending

    SorteringGjennomforinger:
      type: string
      enum:
        - navn-ascending
        - navn-descending
        - tiltaksnummer-ascending
        - tiltaksnummer-descending
        - tiltakstype-ascending
        - tiltakstype-descending
        - startdato-ascending
        - startdato-descending
        - sluttdato-ascending
        - sluttdato-descending
        - arrangor-ascending
        - arrangor-descending
        - publisert_ascending
        - publisert_descending

    GjennomforingDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tiltakstype:
          $ref: "#/components/schemas/EmbeddedTiltakstype"
        navn:
          type: string
        tiltaksnummer:
          type: [string, "null"]
        arrangor:
          $ref: "#/components/schemas/GjennomforingArrangorUnderenhet"
        startDato:
          type: string
          format: date
        sluttDato:
          type: string
          format: date
        arenaAnsvarligEnhet:
          $ref: "#/components/schemas/ArenaNavEnhet"
        status:
          $ref: "#/components/schemas/GjennomforingStatusDto"
        apentForPamelding:
          type: boolean
        antallPlasser:
          type: integer
        avtaleId:
          type: string
          format: uuid
        administratorer:
          type: array
          items:
            $ref: "#/components/schemas/GjennomforingAdministrator"
        kontorstruktur:
          $ref: "#/components/schemas/Kontorstruktur"
        sanityId:
          type: string
          format: uuid
        oppstart:
          $ref: "#/components/schemas/GjennomforingOppstartstype"
        opphav:
          $ref: "#/components/schemas/Opphav"
        kontaktpersoner:
          type: array
          items:
            $ref: "#/components/schemas/GjennomforingKontaktperson"
        stedForGjennomforing:
          type: string
        faneinnhold:
          $ref: "#/components/schemas/Faneinnhold"
        beskrivelse:
          type: string
        publisert:
          type: boolean
        deltidsprosent:
          type: number
        estimertVentetid:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/EstimertVentetid"
        tilgjengeligForArrangorDato:
          type: [string, "null"]
          format: date
        amoKategorisering:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/AmoKategorisering"
        utdanningslop:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/Utdanningslop"
        stengt:
          type: array
          items:
            $ref: "#/components/schemas/StengtPeriode"
      required:
        - id
        - tiltakstype
        - navn
        - tiltaksnummer
        - arrangor
        - startDato
        - sluttDato
        - status
        - apentForPamelding
        - administratorer
        - kontorstruktur
        - oppstart
        - opphav
        - kontaktpersoner
        - publisert
        - deltidsprosent
        - tilgjengeligForArrangorDato
        - amoKategorisering
        - stengt

    GjennomforingRequest:
      type: object
      properties:
        id:
          type: string
          format: UUID
        tiltakstypeId:
          type: string
          format: UUID
        avtaleId:
          type: string
          format: UUID
        navn:
          type: string
        startDato:
          type: string
          format: date
        sluttDato:
          type: [string, "null"]
          format: date
        antallPlasser:
          type: number
        arrangorId:
          type: string
          format: uuid
        arrangorKontaktpersoner:
          type: array
          items:
            type: string
            format: UUID
        administratorer:
          type: array
          items:
            type: string
        navEnheter:
          type: array
          items:
            type: string
        oppstart:
          $ref: "#/components/schemas/GjennomforingOppstartstype"
        kontaktpersoner:
          type: array
          items:
            $ref: "#/components/schemas/GjennomforingKontaktpersonRequest"
        stedForGjennomforing:
          type: [string, "null"]
        faneinnhold:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/FaneinnholdRequest"
        beskrivelse:
          type: [string, "null"]
        deltidsprosent:
          type: number
        estimertVentetid:
          anyOf:
            - type: "null"
            - type: object
              properties:
                verdi:
                  type: number
                enhet:
                  type: string
        tilgjengeligForArrangorDato:
          type: [string, "null"]
          format: date
        amoKategorisering:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/AmoKategorisering"
        utdanningslop:
          anyOf:
            - type: ["null"]
            - $ref: "#/components/schemas/UtdanningslopDbo"
      required:
        - id
        - tiltakstypeId
        - avtaleId
        - navn
        - startDato
        - sluttDato
        - antallPlasser
        - arrangorId
        - arrangorKontaktpersoner
        - administrator
        - navEnheter
        - oppstart
        - kontaktpersoner
        - stedForGjennomforing
        - faneinnhold
        - beskrivelse
        - deltidsprosent
        - estimertVentetid
        - tilgjengeligForArrangorDato
        - amoKategorisering
        - utdanningslop

    GjennomforingStatusDto:
      oneOf:
        - $ref: "#/components/schemas/GjennomforingStatusGjennomfores"
        - $ref: "#/components/schemas/GjennomforingStatusAvsluttet"
        - $ref: "#/components/schemas/GjennomforingStatusAvbrutt"
        - $ref: "#/components/schemas/GjennomforingStatusAvlyst"
      discriminator:
        propertyName: type
        mapping:
          GJENNOMFORES: "#/components/schemas/GjennomforingStatusGjennomfores"
          AVSLUTTET: "#/components/schemas/GjennomforingStatusAvsluttet"
          AVBRUTT: "#/components/schemas/GjennomforingStatusAvbrutt"
          AVLYST: "#/components/schemas/GjennomforingStatusAvlyst"

    GjennomforingStatusGjennomfores:
      type: object
      properties:
        type:
          const: GJENNOMFORES
      required:
        - type

    GjennomforingStatusAvsluttet:
      type: object
      properties:
        type:
          const: AVSLUTTET
      required:
        - type

    GjennomforingStatusAvbrutt:
      type: object
      properties:
        type:
          const: AVBRUTT
        tidspunkt:
          type: string
          format: date-time
        aarsak:
          $ref: "#/components/schemas/AvbrytGjennomforingAarsak"
        beskrivelse:
          type: string
      required:
        - type
        - tidspunkt
        - aarsak
        - beskrivelse

    GjennomforingStatusAvlyst:
      type: object
      properties:
        type:
          const: AVLYST
        tidspunkt:
          type: string
          format: date-time
        aarsak:
          $ref: "#/components/schemas/AvbrytGjennomforingAarsak"
        beskrivelse:
          type: string
      required:
        - type
        - tidspunkt
        - aarsak
        - beskrivelse

    GjennomforingStatus:
      type: string
      enum:
        - GJENNOMFORES
        - AVBRUTT
        - AVLYST
        - AVSLUTTET

    GjennomforingOppstartstype:
      type: string
      enum:
        - LOPENDE
        - FELLES

    Opphav:
      type: string
      enum:
        - ARENA
        - TILTAKSADMINISTRASJON

    ArenaNavEnhet:
      type: object
      properties:
        enhetsnummer:
          type: string
        navn:
          type: string
      required:
        - enhetsnummer

    NavEnhetDto:
      type: object
      properties:
        enhetsnummer:
          type: string
        overordnetEnhet:
          type: [string, "null"]
        navn:
          type: string
        type:
          $ref: "#/components/schemas/NavEnhetType"
      required:
        - navn
        - overordnetEnhet
        - enhetsnummer
        - type

    AvtaleArrangorHovedenhet:
      type: object
      properties:
        id:
          type: string
          format: uuid
        organisasjonsnummer:
          type: string
        navn:
          type: string
        slettet:
          type: boolean
        underenheter:
          type: array
          items:
            $ref: "#/components/schemas/AvtaleArrangorUnderenhet"
        kontaktpersoner:
          type: array
          items:
            $ref: "#/components/schemas/ArrangorKontaktperson"
      required:
        - id
        - organisasjonsnummer
        - navn
        - slettet
        - underenheter
        - kontaktpersoner

    AvtaleArrangorUnderenhet:
      type: object
      properties:
        id:
          type: string
          format: uuid
        organisasjonsnummer:
          type: string
        navn:
          type: string
        slettet:
          type: boolean
      required:
        - id
        - organisasjonsnummer
        - navn
        - slettet

    GjennomforingArrangorUnderenhet:
      type: object
      properties:
        id:
          type: string
          format: uuid
        organisasjonsnummer:
          type: string
        navn:
          type: string
        kontaktpersoner:
          type: array
          items:
            $ref: "#/components/schemas/ArrangorKontaktperson"
        slettet:
          type: boolean
      required:
        - id
        - organisasjonsnummer
        - navn
        - kontaktpersoner
        - slettet

    ArrangorKontaktperson:
      type: object
      properties:
        id:
          type: string
          format: uuid
        navn:
          type: string
        beskrivelse:
          type: [string, "null"]
        telefon:
          type: [string, "null"]
        epost:
          type: string
      required:
        - id
        - navn
        - beskrivelse
        - telefon
        - epost

    AvtaleAdministrator:
      type: object
      properties:
        navIdent:
          type: string
        navn:
          type: string
      required:
        - navIdent
        - navn

    GjennomforingAdministrator:
      type: object
      properties:
        navIdent:
          type: string
        navn:
          type: string
      required:
        - navIdent
        - navn

    PortableTextTypedObject:
      type: object
      additionalProperties: true
      properties:
        _type:
          type: string
        _key:
          type: string
      required:
        - _type

    Faneinnhold:
      type: object
      properties:
        forHvemInfoboks:
          type: string
        forHvem:
          type: array
          items:
            $ref: "#/components/schemas/PortableTextTypedObject"
        detaljerOgInnholdInfoboks:
          type: string
        detaljerOgInnhold:
          type: array
          items:
            $ref: "#/components/schemas/PortableTextTypedObject"
        pameldingOgVarighetInfoboks:
          type: string
        pameldingOgVarighet:
          type: array
          items:
            $ref: "#/components/schemas/PortableTextTypedObject"
        kontaktinfo:
          type: array
          items:
            $ref: "#/components/schemas/PortableTextTypedObject"
        kontaktinfoInfoboks:
          type: string
        oppskrift:
          type: array
          items:
            $ref: "#/components/schemas/PortableTextTypedObject"
        lenker:
          type: array
          items:
            $ref: "#/components/schemas/Lenke"
        delMedBruker:
          type: string

    FaneinnholdRequest:
      type: object
      properties:
        forHvemInfoboks:
          type: [string, "null"]
        forHvem:
          type: object
        detaljerOgInnholdInfoboks:
          type: [string, "null"]
        detaljerOgInnhold:
          type: object
        pameldingOgVarighetInfoboks:
          type: [string, "null"]
        pameldingOgVarighet:
          type: object
        kontaktinfo:
          type: object
        kontaktinfoInfoboks:
          type: [string, "null"]
        delMedBruker:
          type: [string, "null"]

    NavEnhetType:
      type: string
      enum:
        - KO
        - FYLKE
        - TILTAK
        - AAREG
        - ALS
        - ARK
        - DIR
        - DOKSENTER
        - EKSTERN
        - FORVALTNING
        - FPY
        - HELFO
        - HMS
        - INNKREV
        - INTRO
        - IT
        - KLAGE
        - KONTAKT
        - KONTROLL
        - LOKAL
        - OKONOMI
        - OTENESTE
        - OPPFUTLAND
        - OTENESE
        - RIKSREV
        - ROBOT
        - ROL
        - TILLIT
        - UTLAND
        - YTA

    AvbrytGjennomforingAarsak:
      type: string
      enum:
        - ENDRING_HOS_ARRANGOR
        - BUDSJETT_HENSYN
        - FOR_FAA_DELTAKERE
        - FEILREGISTRERING
        - AVBRUTT_I_ARENA
        - ANNET

    AvbrytAvtaleAarsak:
      type: string
      enum:
        - ENDRING_HOS_ARRANGOR
        - BUDSJETT_HENSYN
        - FEILREGISTRERING
        - AVBRUTT_I_ARENA
        - ANNET

    GjennomforingDeltakerSummary:
      type: object
      properties:
        antallDeltakere:
          type: number
        deltakereByStatus:
          type: array
          items:
            type: object
            properties:
              status:
                type: string
              count:
                type: integer
            required:
              - status
              - count
      required:
        - antallDeltakere
        - deltakereByStatus

    GjennomforingKontaktperson:
      type: object
      properties:
        navIdent:
          type: string
        navn:
          type: string
        epost:
          type: string
        mobilnummer:
          type: [string, "null"]
        beskrivelse:
          type: [string, "null"]
      required:
        - navn
        - navIdent
        - epost
        - mobilnummer
        - beskrivelse

    GjennomforingKontaktpersonRequest:
      type: object
      properties:
        navIdent:
          type: string
        beskrivelse:
          type: [string, "null"]
      required: [navIdent, beskrivelse]

    Kontorstruktur:
      type: array
      items:
        type: object
        properties:
          region:
            $ref: "#/components/schemas/NavEnhetDto"
          kontorer:
            type: array
            items:
              $ref: "#/components/schemas/NavEnhetDto"
        required:
          - region
          - kontorer

    EstimertVentetidEnhet:
      type: string
      enum:
        - uke
        - maned

    EstimertVentetid:
      type: object
      properties:
        verdi:
          type: number
        enhet:
          $ref: "#/components/schemas/EstimertVentetidEnhet"
      required:
        - verdi
        - enhet

    StengtPeriode:
      type: object
      properties:
        id:
          type: number
        start:
          type: string
          format: date
        slutt:
          type: string
          format: date
        beskrivelse:
          type: string
      required:
        - id
        - start
        - slutt
        - beskrivelse

    Lenke:
      type: object
      properties:
        lenkenavn:
          type: string
        lenke:
          type: string
          format: uri
        apneINyFane:
          type: boolean
        visKunForVeileder:
          type: boolean
      required:
        - lenkenavn
        - lenke
        - apneINyFane
        - visKunForVeileder

    Tiltakskode:
      type: string
      enum:
        - VARIG_TILRETTELAGT_ARBEID_SKJERMET
        - OPPFOLGING
        - JOBBKLUBB
        - GRUPPE_FAG_OG_YRKESOPPLAERING
        - GRUPPE_ARBEIDSMARKEDSOPPLAERING
        - DIGITALT_OPPFOLGINGSTILTAK
        - AVKLARING
        - ARBEIDSRETTET_REHABILITERING
        - ARBEIDSFORBEREDENDE_TRENING

    Personopplysning:
      type: string
      enum:
        - NAVN
        - KJONN
        - ADRESSE
        - TELEFONNUMMER
        - FOLKEREGISTER_IDENTIFIKATOR
        - FODSELSDATO
        - BEHOV_FOR_BISTAND_FRA_NAV
        - YTELSER_FRA_NAV
        - BILDE
        - EPOST
        - BRUKERNAVN
        - ARBEIDSERFARING_OG_VERV
        - SERTIFIKATER_OG_KURS
        - IP_ADRESSE
        - UTDANNING_OG_FAGBREV
        - PERSONLIGE_EGENSKAPER_OG_INTERESSER
        - SPRAKKUNNSKAP
        - ADFERD
        - SOSIALE_FORHOLD
        - HELSEOPPLYSNINGER
        - RELIGION
        - NASJONALITET
        - ADRESSESPERRE
        - VERGEMAL

    Kurstype:
      type: string
      enum:
        - BRANSJE_OG_YRKESRETTET
        - NORSKOPPLAERING
        - GRUNNLEGGENDE_FERDIGHETER
        - FORBEREDENDE_OPPLAERING_FOR_VOKSNE
        - STUDIESPESIALISERING

    AmoKategorisering:
      oneOf:
        - $ref: "#/components/schemas/BransjeOgYrkesrettet"
        - $ref: "#/components/schemas/Norskopplaering"
        - $ref: "#/components/schemas/ForberedendeOpplaeringForVoksne"
        - $ref: "#/components/schemas/GrunnleggendeFerdigheter"
        - $ref: "#/components/schemas/Studiespesialisering"

    BransjeOgYrkesrettet:
      type: object
      properties:
        kurstype:
          type: string
          const: BRANSJE_OG_YRKESRETTET
        bransje:
          $ref: "#/components/schemas/Bransje"
        forerkort:
          type: array
          items:
            $ref: "#/components/schemas/ForerkortKlasse"
        sertifiseringer:
          type: array
          items:
            $ref: "#/components/schemas/Sertifisering"
        innholdElementer:
          type: array
          items:
            $ref: "#/components/schemas/InnholdElement"
      required:
        - kurstype
        - bransje
        - innholdElementer
        - sertifiseringer
        - forerkort

    Norskopplaering:
      type: object
      properties:
        kurstype:
          type: string
          const: NORSKOPPLAERING
        norskprove:
          type: boolean
        innholdElementer:
          type: array
          items:
            $ref: "#/components/schemas/InnholdElement"
      required:
        - kurstype
        - norskprove
        - innholdElementer

    GrunnleggendeFerdigheter:
      type: object
      properties:
        kurstype:
          type: string
          const: GRUNNLEGGENDE_FERDIGHETER
        innholdElementer:
          type: array
          items:
            $ref: "#/components/schemas/InnholdElement"
      required:
        - kurstype
        - innholdElementer

    ForberedendeOpplaeringForVoksne:
      type: object
      properties:
        kurstype:
          type: string
          const: FORBEREDENDE_OPPLAERING_FOR_VOKSNE
      required:
        - kurstype

    Studiespesialisering:
      type: object
      properties:
        kurstype:
          type: string
          const: STUDIESPESIALISERING
      required:
        - kurstype

    Sertifisering:
      type: object
      properties:
        konseptId:
          type: number
        label:
          type: string
      required:
        - konseptId
        - label

    ForerkortKlasse:
      type: string
      enum:
        - A
        - A1
        - A2
        - AM
        - AM_147
        - B
        - B_78
        - BE
        - C
        - C1
        - C1E
        - CE
        - D
        - D1
        - D1E
        - DE
        - S
        - T

    Bransje:
      type: string
      enum:
        - INGENIOR_OG_IKT_FAG
        - HELSE_PLEIE_OG_OMSORG
        - BARNE_OG_UNGDOMSARBEID
        - KONTORARBEID
        - BUTIKK_OG_SALGSARBEID
        - BYGG_OG_ANLEGG
        - INDUSTRIARBEID
        - REISELIV_SERVERING_OG_TRANSPORT
        - SERVICEYRKER_OG_ANNET_ARBEID
        - ANDRE_BRANSJER

    InnholdElement:
      type: string
      enum:
        - GRUNNLEGGENDE_FERDIGHETER
        - JOBBSOKER_KOMPETANSE
        - TEORETISK_OPPLAERING
        - PRAKSIS
        - ARBEIDSMARKEDSKUNNSKAP
        - NORSKOPPLAERING

    Opsjonsmodell:
      type: object
      properties:
        type:
          $ref: "#/components/schemas/OpsjonsmodellType"
        opsjonMaksVarighet:
          type: [string, "null"]
          format: date
        customOpsjonsmodellNavn:
          type: [string, "null"]
      required:
        - type
        - opsjonMaksVarighet
        - customOpsjonsmodellNavn

    OpsjonsmodellType:
      type: string
      enum:
        - TO_PLUSS_EN
        - TO_PLUSS_EN_PLUSS_EN
        - TO_PLUSS_EN_PLUSS_EN_PLUSS_EN
        - ANNET
        - INGEN_OPSJONSMULIGHET
        - VALGFRI_SLUTTDATO

    OpsjonStatus:
      type: string
      enum:
        - OPSJON_UTLOST
        - SKAL_IKKE_UTLOSE_OPSJON

    OpsjonLoggDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        sluttDato:
          type: [string, "null"]
          format: date
        forrigeSluttDato:
          type: [string, "null"]
          format: date
        status:
          $ref: "#/components/schemas/OpsjonStatus"
      required:
        - id
        - createdAt
        - sluttDato
        - forrigeSluttDato
        - status

    AvtaltSatsRequest:
      type: object
      properties:
        gjelderFra:
          type: [string, "null"]
          format: date
        pris:
          type: [integer, "null"]
        valuta:
          type: string
      required:
        - gjelderFra
        - pris
        - valuta

    AvtaltSatsDto:
      type: object
      properties:
        gjelderFra:
          type: string
          format: date
        gjelderTil:
          type: [string, "null"]
          format: date
        pris:
          type: integer
        valuta:
          type: string
      required:
        - gjelderFra
        - pris
        - valuta

    UtdanningslopDbo:
      type: object
      properties:
        utdanningsprogram:
          type: string
          format: uuid
        utdanninger:
          type: array
          items:
            type: string
            format: uuid
      required:
        - utdanningsprogram
        - utdanninger

    Utdanningslop:
      type: object
      properties:
        utdanningsprogram:
          $ref: "#/components/schemas/Utdanningsprogram"
        utdanninger:
          type: array
          items:
            $ref: "#/components/schemas/Utdanning"
      required:
        - utdanningsprogram
        - utdanninger

    Utdanningsprogram:
      type: object
      properties:
        id:
          type: string
          format: uuid
        navn:
          type: string
      required:
        - id
        - navn

    Utdanning:
      type: object
      properties:
        id:
          type: string
          format: uuid
        navn:
          type: string
      required:
        - id
        - navn
